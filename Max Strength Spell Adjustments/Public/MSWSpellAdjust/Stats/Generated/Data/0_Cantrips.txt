// ==========================================================================
// Cantrip Spells

// ==========================================================================
// Booming Blade

new entry "Target_BoomingBlade_ClassSpell"
type "SpellData"
data "SpellType" "Target"
using "Target_BoomingBlade_ClassSpell"
data "SpellProperties" "GROUND:DealDamage(MainMeleeWeapon,MainMeleeWeaponDamageType);GROUND:ExecuteWeaponFunctors(MainHand);CastOffhand[GROUND:DealDamage(OffhandMeleeWeapon,OffhandMeleeWeaponDamageType);GROUND:ExecuteWeaponFunctors(OffHand)];ApplyStatus(SELF,BOOMINGBLADE_BLOCK,100,1)"
data "RequirementConditions" "CanUseWeaponActions() and IsProficientWithEquippedWeapon() and not HasStatus('BOOMINGBLADE_BLOCK')"
data "SpellRoll" "BladeCantripMeleeAttack()"
data "SpellSuccess" "DealDamage(MainMeleeWeapon,MainMeleeWeaponDamageType);ExecuteWeaponFunctors(MainHand);IF(CharacterLevelGreaterThan(4)):DealDamage(LevelMapValue(BoomingBlade),Thunder,Magical,,0,,true);IF(not CharacterLevelGreaterThan(4)):ApplyStatus(SCC_BOOMING_ENERGY,100,1);IF(CharacterLevelGreaterThan(4) and not CharacterLevelGreaterThan(9)):ApplyStatus(SCC_BOOMING_ENERGY_5,100,1);IF(CharacterLevelGreaterThan(10) and not CharacterLevelGreaterThan(16)):ApplyStatus(SCC_BOOMING_ENERGY_11,100,1);IF(CharacterLevelGreaterThan(16) and Character()):ApplyStatus(SCC_BOOMING_ENERGY_17,100,1)"
data "DescriptionParams" "DealDamage(LevelMapValue(BoomingBlade),Thunder)"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon,MainMeleeWeaponDamageType);DealDamage(LevelMapValue(BoomingBlade),Thunder)"

new entry "SCC_BOOMING_TOOLTIP"
type "StatusData"
data "StatusType" "BOOST"
using "SCC_BOOMING_TOOLTIP"
data "DescriptionParams" "DealDamage(LevelMapValue(BoomingBlade_Walk),Thunder)"

new entry "SCC_BOOMING_ENERGY"
type "StatusData"
data "StatusType" "BOOST"
using "SCC_BOOMING_ENERGY"
data "DescriptionParams" "DealDamage(1d8,Thunder,,,,ad727a13-c6f0-4b5b-aefd-aac79c6ed46e)"

new entry "SCC_BOOMING_ENERGY_5"
type "StatusData"
data "StatusType" "BOOST"
using "SCC_BOOMING_ENERGY_5"
data "DescriptionParams" "DealDamage(2d8,Thunder,,,,ad727a13-c6f0-4b5b-aefd-aac79c6ed46e)"

new entry "SCC_BOOMING_ENERGY_11"
type "StatusData"
data "StatusType" "BOOST"
using "SCC_BOOMING_ENERGY"
data "DescriptionParams" "DealDamage(3d8,Thunder,,,,ad727a13-c6f0-4b5b-aefd-aac79c6ed46e)"
data "StackPriority" "11"

new entry "SCC_BOOMING_ENERGY_17"
type "StatusData"
data "StatusType" "BOOST"
using "SCC_BOOMING_ENERGY"
data "DescriptionParams" "DealDamage(4d8,Thunder,,,,ad727a13-c6f0-4b5b-aefd-aac79c6ed46e)"
data "StackPriority" "17"

new entry "SCC_BOOMING_ENERGY_DAMAGE"
type "StatusData"
data "StatusType" "BOOST"
using "SCC_BOOMING_ENERGY_DAMAGE"
data "OnApplyFunctors" "IF(HasStatus('SCC_BOOMING_ENERGY')):DealDamage(1d8,Thunder,Magical,,0,,true,true);IF(HasStatus('SCC_BOOMING_ENERGY_5')):DealDamage(2d8,Thunder,Magical,,0,,true,true);IF(HasStatus('SCC_BOOMING_ENERGY_11')):DealDamage(3d8,Thunder,Magical,,0,,true,true);IF(HasStatus('SCC_BOOMING_ENERGY_17')):DealDamage(4d8,Thunder,Magical,,0,,true,true);RemoveStatus(SCC_BOOMING_ENERGY);RemoveStatus(SCC_BOOMING_ENERGY_5);RemoveStatus(SCC_BOOMING_ENERGY_11);RemoveStatus(SCC_BOOMING_ENERGY_17)"

// ==========================================================================
// Control Flames

new entry "Target_ControlFlames_Douse"
type "SpellData"
data "SpellType" "Target"
using "Target_ControlFlames_Douse"
data "SpellProperties" "GROUND:SurfaceChange(Douse);TARGET:IF(Item()):RemoveStatus(BURNING);ApplyEquipmentStatus(MainHand,DIPPED_FIRE,100,3)"

// ==========================================================================
// Create Bonfire

new entry "CREATE_BONFIRE_BURN"
type "StatusData"
data "StatusType" "BOOST"
using "CREATE_BONFIRE_AURA"
data "OnTickSuccess" "IF(not CharacterLevelGreaterThan(4, GetSummoner(context.Source))):DealDamage(1d8,Fire,Magical);IF(CharacterLevelGreaterThan(4, GetSummoner(context.Source)) and not CharacterLevelGreaterThan(9, GetSummoner(context.Source))):DealDamage(2d8,Fire,Magical);IF(CharacterLevelGreaterThan(9, GetSummoner(context.Source)) and not CharacterLevelGreaterThan(15, GetSummoner(context.Source))):DealDamage(3d8,Fire,Magical);IF(CharacterLevelGreaterThan(15, GetSummoner(context.Source))):DealDamage(4d8,Fire,Magical)"

// ==========================================================================
// Green Flame Blade

new entry "Target_SCC_GreenFlame_Blade"
type "SpellData"
data "SpellType" "Target"
using "Target_SCC_GreenFlame_Blade"
data "SpellSuccess" "DealDamage(MainMeleeWeapon,MainMeleeWeaponDamageType);ExecuteWeaponFunctors(MainHand);IF(CharacterLevelGreaterThan(4)):DealDamage(LevelMapValue(SCAGCantrips),Fire,Magical,,0,,true);SpawnExtraProjectiles(Projectile_SCC_GreenFlame_Explosion)"
data "DescriptionParams" "DealDamage(LevelMapValue(SCAGCantrips)+max(1,SpellCastingAbilityModifier),Fire)"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon,MainMeleeWeaponDamageType);DealDamage(LevelMapValue(SCAGCantrips),Fire)"

new entry "Projectile_SCC_GreenFlame_Explosion"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_SCC_GreenFlame_Explosion"
data "SpellProperties" "GROUND:SurfaceChange(Ignite);GROUND:SurfaceChange(Melt);IF(not CharacterLevelGreaterThan(4)):DealDamage(max(1,SpellCastingAbilityModifier),Fire,Magical);IF(CharacterLevelGreaterThan(4)):DealDamage(LevelMapValue(SCAGCantrips)+max(1,SpellCastingAbilityModifier),Fire,Magical)"

// ==========================================================================
// Gust

new entry "Target_Gust"
type "SpellData"
data "SpellType" "Target"
using "Target_Gust"
data "SpellSuccess" "IF(not Ally()):Force(2,OriginToTarget,Aggressive);IF(Ally()):Force(2,OriginToTarget,Friendly)"
data "DescriptionParams" "Distance(2)"

